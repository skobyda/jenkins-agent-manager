<?xml version="1.0" encoding="UTF-8"?>

<j:jelly xmlns:j="jelly:core" xmlns:st="jelly:stapler" xmlns:d="jelly:define" xmlns:l="/lib/layout"
         xmlns:t="/lib/hudson" xmlns:f="/lib/form">
    <f:block>
    <f:repeatable var="script" name="scripts" items="${instance.scripts}">
        <f:entry title="Trigger actions" field="trigger">
            <f:dropdownList name="trigger" >
                <f:dropdownListBlock selected="${script.trigger=='BEFORE'}" value="BEFORE" title="Before build"/>
                <f:dropdownListBlock selected="${script.trigger=='SUCCESS'}" value="SUCCESS" title="Successful build"/>
                <f:dropdownListBlock selected="${script.trigger=='FAILURE'}" value="FAILURE" title="Failed build"/>
            </f:dropdownList>
        </f:entry>

        <f:entry title="Choose action" field="action">
            <f:dropdownList name="action">
                <f:dropdownListBlock selected="${script.action=='CLEANUP'}" value="CLEANUP" title="Clean up"/>
                <f:dropdownListBlock selected="${script.action=='REBOOT'}" value="REBOOT" title="Reboot"/>
                <f:dropdownListBlock selected="${script.action=='SCRIPT'}" value="SCRIPT" title="Run custom script">
                    <f:entry field="script" title="Script" >
                        <f:textarea value="${script.script}" />
                    </f:entry>
                </f:dropdownListBlock>
            </f:dropdownList>
        </f:entry>
        <f:entry title="">
            <div align="right">
                <f:repeatableDeleteButton />
            </div>
        </f:entry>
    </f:repeatable>
</f:block>
</j:jelly>
